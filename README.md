oc-template-react
=================

react-templates & utilties for the [OpenComponents](https://github.com/opentable/oc) template system

***

Module for handling React templates in OC

[![Build Status](https://secure.travis-ci.org/opencomponents/oc-template-react.png?branch=master)](http://travis-ci.org/opencomponents/oc-template-react)
[![Known Vulnerabilities](https://snyk.io/test/github/opencomponents/oc-template-react/badge.svg)](https://snyk.io/test/github/opencomponents/oc-template-react)
[![npm version](https://badge.fury.io/js/oc-template-react.svg)](http://badge.fury.io/js/oc-template-react)

## Packages included in this repo

| Name | Version |
|--------|-------|
| [`oc-template-react`](/packages/oc-template-react) | [![npm version](https://badge.fury.io/js/oc-template-react.svg)](http://badge.fury.io/js/oc-template-react) |
| [`oc-template-react-compiler`](/packages/oc-template-react-compiler) | [![npm version](https://badge.fury.io/js/oc-template-react-compiler.svg)](http://badge.fury.io/js/oc-template-react-compiler) |
| [`oc-react-component-wrapper`](/packages/oc-react-component-wrapper) | [![npm version](https://badge.fury.io/js/oc-react-component-wrapper.svg)](http://badge.fury.io/js/oc-react-component-wrapper) |


## Usage:

Initialize a component with the oc-template-react and follow the CLI instructions

```
$ oc init <your-component-name> oc-template-react
```

## Extra/Conventions:
- `template.src` - the react App entry point -  should export a react component as `default`
- `props = server()` - the viewModel generated by the server is automatically passed to the react application as props
- `Server Side Rendering` = server side rendering should work as for any other OpenComponent
- `css-modules` are supported.
- The oc-client-browser is extended and will now expose all the available react-component at `oc.reactComponents[bundleHash]`
- React, ReactDOM and PropTypes are not bundled when packaging and publishing the component

## Utils

The compiler exposes some utilities that could be used by your React application:

### HOCs

#### withDataProvider

An Higher order component that will make a `getData` function available via props.

##### Usage:

```javascript
import { withDataProvider } from 'oc-template-react-compiler/utils';

const yourApp = props => {
  // you can use props.getData here
};

yourEnhancedApp = withDataProvider(yourApp);
```

`getData` accept two arguments: `(params, callback) => callback(err, result)`. It will perform a post back request to the component endpoint with the specified query perams invoking the callback with the results.

#### withSettingProvider

An Higher order component that will make a `getSetting` function available via props.

##### Usage:

```javascript
import { withSettingProvider } from 'oc-template-react-compiler/utils';

const yourApp = props => {
  // you can use props.getSetting here
};

yourEnhancedApp = withSettingProvider(yourApp);
```

`getSetting` accept one argument: `settingName => settingValue`. It will return the value for the requested setting.

Settings available at the moment:
- `getSetting(name)` : return the name of the OC component
- `getSetting(version)` : return the version of the OC component
- `getSetting(baseUrl)` : return the [baseUrl of the oc-registry](https://github.com/opentable/oc/wiki/The-server.js#context-properties)
- `getSetting(staticPath)` : return the path to the [static assets](https://github.com/opentable/oc/wiki/The-server.js#add-static-resource-to-the-component) of the OC component